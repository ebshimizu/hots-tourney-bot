{
  "$schema": "http://json-schema.org/schema",
  "title": "incident schema",
  "version": 2,
  "type": "object",
  "properties": {
    "userId": {
      "type": "string",
      "index": true
    },
    "serverId": {
      "type": "string",
      "index": true
    },
    "date": {
      "type": "integer",
      "index": true
    },
    "incidentType": {
      "type": "string",
      "enum": ["misclick", "typo"],
      "index": true
    },
    "duration": {
      "type": "number"
    },
    "appealed": {
      "type": "boolean",
      "default": false
    },
    "trialed": {
      "type": "boolean",
      "default": false
    },
    "appealedOn": {
      "type": "string",
      "default": ""
    },
    "messageId": {
      "type": "integer"
    },
    "appealResults": {
      "type": "object",
      "properties": {
        "yes": {
          "type": "integer",
          "default": 0
        },
        "no": {
          "type": "integer",
          "default": 0
        }
      }
    }
  },
  "required": ["userId", "serverId", "date", "incidentType"],
  "compoundIndexes": [
    ["serverId", "userId"]
  ]
}